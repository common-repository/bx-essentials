"use strict";var addEvent=function(e,t,r){t.split(" ").map(function(t){document.addEventListener(t,function(t){t.target.matches(e)&&r.call(t.target,t)},{capture:!0,passive:!1})})},bxCustomFormValidation=function(t){var e,r,a,n,o,i,l,s=t.target;["radio","checkbox","color","range","file"].includes(s.type)||(l=s.validity,s.parentNode.classList.remove("input-invalid"),null===(t=s.parentNode.querySelector(".input-error"))||void 0===t||t.remove(),s.dataset.hasOwnProperty("customValidation")&&s.dataset.customValidation.length&&(t=s.dataset.customValidation.toString(),"function"!=typeof(t=new Function('"use strict"; return ('.concat(t,")"))())||void 0!==(t=t(s.value))&&!1!==t&&0<t.length&&(e=t)),l.valid&&void 0===e||(s.parentNode.classList.add("input-invalid"),l.rangeOverflow?(r="date"==(a="number"!==s.type?"date":"number")?bxFormatInputDate(s.max,s.type):s.max,a=(s.dataset.hasOwnProperty("rangeOverflow")?s.dataset:gearbxValidity[a]).rangeOverflow,bxSetInputError(s,a.replace("%max",r))):l.rangeUnderflow?(r="date"==(a="number"!==s.type?"date":"number")?bxFormatInputDate(s.min,s.type):s.min,a=(s.dataset.hasOwnProperty("rangeUnderflow")?s.dataset:gearbxValidity[a]).rangeUnderflow,bxSetInputError(s,a.replace("%min",r))):l.tooLong?(n=(s.dataset.hasOwnProperty("tooLong")?s.dataset:gearbxValidity).tooLong,bxSetInputError(s,n.replace("%maxLength",s.maxLength))):l.tooShort?(n=(s.dataset.hasOwnProperty("tooShort")?s.dataset:gearbxValidity).tooShort,bxSetInputError(s,n.replace("%minLength",s.minLength))):l.stepMismatch?(o=(s.dataset.hasOwnProperty("stepMismatch")?s.dataset:gearbxValidity).stepMismatch,bxSetInputError(s,o.replace("%step",s.step))):l.badInput?(o=(s.dataset.hasOwnProperty("badInput")?s.dataset:gearbxValidity).badInput,bxSetInputError(s,o.replace("%type",gearbxValidity.types[s.type]))):l.typeMismatch?(i=s.dataset.hasOwnProperty("typeMismatch")?s.dataset.typeMismatch:gearbxValidity.badInput,bxSetInputError(s,i.replace("%type",s.type))):l.patternMismatch?(i=(s.dataset.hasOwnProperty("patternMismatch")?s.dataset:gearbxValidity).patternMismatch,bxSetInputError(s,i)):l.valueMissing?(l=(s.dataset.hasOwnProperty("valueMissing")?s.dataset:gearbxValidity).valueMissing,bxSetInputError(s,l)):bxSetInputError(s,e)))};function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,n,o=[],i=!0,l=!1;try{for(r=r.call(t);!(i=(a=r.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){l=!0,n=t}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var bxDoCustomRequest=function(e){if("object"!==_typeof(null==e?void 0:e.body))throw new Error("body is not a object");document.body.classList.add("body-loading");var r=[];e.hasOwnProperty("element")&&e.hasOwnProperty("class")&&(r=e.class.split(" "),document.querySelectorAll(e.element).forEach(function(t){return(t=t.classList).add.apply(t,_toConsumableArray(r))}));for(var t=new FormData,a=0,n=Object.entries(e.body);a<n.length;a++){var o=_slicedToArray(n[a],2),i=o[0],o=o[1];t.append(i,o)}return fetch(gearbx.ajaxUrl,{method:"POST",mode:"same-origin",referrerPolicy:"same-origin",body:t}).then(function(t){return document.body.classList.remove("body-loading"),e.hasOwnProperty("element")&&e.hasOwnProperty("class")&&document.querySelectorAll(e.element).forEach(function(t){return(t=t.classList).remove.apply(t,_toConsumableArray(r))}),t.json()})};function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var a,n,o=[],i=!0,l=!1;try{for(r=r.call(t);!(i=(a=r.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){l=!0,n=t}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}}function _arrayWithHoles(t){if(Array.isArray(t))return t}var bxDoWpRequest=function(e){if(e.preventDefault(),e.target.classList.add("action-loading"),document.body.classList.add("body-loading"),["A","BUTTON"].includes(e.target.tagName)){e.target.disabled=!0;for(var t={},t=e.target.dataset.hasOwnProperty("body")?bxParseAttrBody(e.target.dataset.body):e.target.dataset,r=new FormData,a=0,n=Object.entries(t);a<n.length;a++){var o=_slicedToArray(n[a],2),i=o[0],o=o[1];r.append(i,o)}}else"FORM"===e.target.tagName&&(e.target.querySelectorAll("fieldset,button").forEach(function(t){return t.disabled=!0}),r=new FormData(e.target));return r.set("action",bxParseAttrBody(e.target.dataset.action,!0)),fetch(gearbx.ajaxUrl,{method:"POST",mode:"same-origin",referrerPolicy:"same-origin",body:r}).then(function(t){return["A","BUTTON"].includes(e.target.tagName)?e.target.disabled=!1:"FORM"===e.target.tagName&&e.target.querySelectorAll("fieldset,button").forEach(function(t){return t.disabled=!1}),e.target.classList.remove("action-loading"),document.body.classList.remove("body-loading"),t.json()})},bxFormatInputDate=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"datetime-local";if("week"===e)return t;var r={};["date","month","datetime-local"].includes(e)&&(r.month="long",r.year="numeric"),["date","datetime-local"].includes(e)&&(r.day="numeric"),["time","datetime-local"].includes(e)&&(r.hour="2-digit",r.minute="2-digit");var a,n=new Date;if("datetime-local"===e)n=new Date(t);else switch(e){case"time":a=t.split(":"),n.setHours(a[0]),n.setMinutes(a[1]);break;case"month":a=t.split("-"),n.setFullYear(a[0]),n.setMonth(Number(a[1])-1);break;case"date":a=t.split("-"),n.setFullYear(a[0]),n.setMonth(Number(a[1])-1),n.setDate(a[2])}return new Intl.DateTimeFormat(gearbx.lang,r).format(n)};function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var bxHandleWpAction=function(r){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(void 0!==r){if(!r.hasOwnProperty("action"))throw new Error("no action present");var e,a,n,o,i,l=r.action,s=null!==(e=null==r||null===(u=r.key)||void 0===u?void 0:u.replace(/[^a-zA-Z0-9_-]/g,""))&&void 0!==e?e:"",u=r.action.indexOf("-");-1!==u&&(l=r.action.slice(0,u),r.action.slice(u+1)),["cookie","session","local"].includes(l)?t&&(e=JSON.stringify(r.content),"cookie"===l?(u=r.hasOwnProperty("duration")?Number(r.duration):604800,document.cookie="bx_".concat(s,"=").concat(e,";Path=/;SameSite=Lax;Secure;Max-Age=").concat(u)):"session"===l?sessionStorage.setItem("bx_".concat(s),e):"local"===l&&localStorage.setItem("bx_".concat(s),e)):"toast"!==l?"scrollTo"!==l?"go"!==l?"open"!==l?"reload"!==l?"trigger"!==l?document.querySelectorAll(r.element).forEach(function(t){if("after"===l?l="afterend":"before"===l?l="beforebegin":"append"===l?l="beforeend":"prepend"===l&&(l="afterbegin"),["beforebegin","afterbegin","afterend","beforeend"].includes(l))t.insertAdjacentHTML(l,r.content);else if("text"===l)t.textContent=r.content;else if("html"===l)t.innerHTML=r.content;else if("show"===l)t.classList.remove("d-none","hidden");else if("hide"===l)t.classList.add("d-none","hidden");else if("removeClass"===l)(e=t.classList).remove.apply(e,_toConsumableArray(r.content.split(" ")));else if("addClass"===l){var e;(e=t.classList).add.apply(e,_toConsumableArray(r.content.split(" ")))}else if("setAttribute"===l)t.setAttribute(r.key,r.content);else if("removeAttribute"===l)t.removeAttribute(r.key);else{if("remove"!==l)throw new Error("unknown action");t.remove()}}):document.querySelector(r.element).dispatchEvent(new Event(String(r.content),{bubbles:!1,cancelable:!0})):(a=r.hasOwnProperty("duration")?Number(r.duration):5,setTimeout(function(){return document.location.reload(void 0!==r.content)},1e3*a)):(a=r.hasOwnProperty("duration")?Number(r.duration):5,n=new URL(r.content).href,setTimeout(function(){return window.open(n)},1e3*a)):(i=r.hasOwnProperty("duration")?Number(r.duration):5,o=new URL(r.content).href,setTimeout(function(){return location.assign(o)},1e3*i)):document.querySelector(r.element).scrollIntoView({behavior:"smooth"}):(i=r.hasOwnProperty("duration")?r.duration:null,showToast(r.content,t,i))}},bxHandleWpRequest=function(t){if(!document.body.classList.contains("body-loading")){t=(null!=t&&t.type&&["submit","click","touchstart"].includes(t.type)?bxDoWpRequest:bxDoCustomRequest)(t);return t.then(bxHandleWpResponse).catch(bxHandleWpResponse)}},bxHandleWpResponse=function(e){!1===e.success&&console.error(e),(Array.isArray(e.data)?e.data:[e.data]).map(function(t){return bxHandleWpAction(t,e.success)})};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var bxParseAttrBody=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if('"'===(t="\\"===t.charAt(0)?t.replace(/\\/g,""):t).charAt(0)&&(t=t.slice(1,-1)),e)return t;if(t.includes(":")&&"{"!==t.charAt(0)&&(t="{"+t+"}"),"function"==typeof(t=new Function('"use strict";return ('+t+")")())&&(t=t()),"object"!==_typeof(t))throw new Error("[data-body] is not a object");return t},bxSetInputError=function(t,e){var r=t.closest("form").dataset.validity;!["before","after"].includes(r)||e&&t.insertAdjacentHTML({before:"beforebegin",after:"afterend"}[r],'<span class="input-error">'.concat(e,"</span>"))},showToast=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"success",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:7,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";"boolean"==typeof e&&(e=e?"success":"error");var n=document.querySelector("ul.toasts-list");n||((n=document.createElement("ul")).className="toasts-list",document.body.appendChild(n));var o=document.createElement("li");o.role="alert";e=["toast","toast-invisible",{success:"toast-success",error:"toast-error",warning:"toast-warning",info:"toast-info"}[e]||"toast-"+e,"toast-number-"+document.querySelectorAll(".toast").length];o.className=e.join(" ");e=document.createTextNode(t);a?((t=document.createElement("a")).href=a,t.target="_blank",t.appendChild(e),o.appendChild(t)):o.appendChild(e),n.appendChild(o),setTimeout(function(){o.classList.remove("toast-invisible")},1),setTimeout(function(){o.classList.add("toast-invisible")},1e3*r),setTimeout(function(){n.removeChild(o),document.querySelectorAll(".toast").length||document.body.removeChild(n)},1e3*r+501)};addEvent("form[data-action]","submit",bxHandleWpRequest),addEvent("a[data-action],button[data-action]","click touchstart",bxHandleWpRequest),addEvent("form[data-validity] input","input change",bxCustomFormValidation);